{"ast":null,"code":"// src/router/index.js\n\nimport { createRouter, createWebHistory } from \"vue-router\";\nimport store from \"../store\";\nimport RedirectOrder from \"../components/RedirectOrder.vue\";\nimport Login from \"@/components/LoginComponent.vue\";\nimport PackageList from \"@/components/PackageList.vue\";\nimport PackageInfo from \"@/components/PackageInfo.vue\";\nimport Welcome from \"@/components/Welcome.vue\";\nimport QueryOrderById from \"@/components/QueryOrderById.vue\";\nimport PersonalCenter from \"@/components/PersonalCenter.vue\";\nconst routes = [{\n  path: \"/\",\n  name: \"WelcomePage\",\n  component: Welcome,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: \"/queryOrderById\",\n  name: \"QueryOrderById\",\n  component: QueryOrderById,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: \"/personalCenter\",\n  name: \"PersonalCenter\",\n  component: PersonalCenter,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: \"/redirect\",\n  name: \"RedirectOrder\",\n  component: RedirectOrder,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: \"/login\",\n  name: \"Login\",\n  component: Login,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: \"/package-list\",\n  name: \"PackageList\",\n  component: PackageList,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: \"/package-info\",\n  name: \"PackageInfo\",\n  component: PackageInfo,\n  meta: {\n    requiresAuth: false\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const loggedIn = localStorage.getItem(\"userToken\");\n\n  // 更新 loggedIn 状态\n  store.commit(\"setLoggedIn\", !!loggedIn);\n\n  // 如果用户已登录，从服务器获取用户名并更新 Vuex 状态\n  if (loggedIn) {\n    const username = \"Fetched from server\";\n    store.commit(\"setUsername\", username);\n  } else {\n    // 如果用户未登录或注销，将 username 重置为空字符串\n    store.commit(\"setUsername\", \"\");\n  }\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  if (requiresAuth && !loggedIn) {\n    next({\n      name: \"Login\"\n    });\n  } else {\n    next();\n  }\n});\nexport default router;\n\n// import { createRouter, createWebHistory } from \"vue-router\";\n// // import QueryOrder from \"../components/QueryOrderById.vue\";\n// import RedirectOrder from \"../components/RedirectOrder.vue\";\n// import Login from \"@/components/LoginComponent.vue\";\n// import PackageList from \"@/components/PackageList.vue\";\n// import PackageInfo from \"@/components/PackageInfo.vue\";\n// import Welcome from \"@/components/Welcome.vue\";\n// import QueryOrderById from \"@/components/QueryOrderById.vue\";\n//\n// const routes = [\n//   {\n//     path: \"/\",\n//     name: \"WelcomePage\",\n//     component: Welcome,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/queryOrderById\",\n//     name: \"QueryOrderById\",\n//     component: QueryOrderById,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/redirect\",\n//     name: \"RedirectOrder\",\n//     component: RedirectOrder,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/login\",\n//     name: \"Login\",\n//     component: Login,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/package-list\",\n//     name: \"PackageList\",\n//     component: PackageList,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/package-info\",\n//     name: \"PackageInfo\",\n//     component: PackageInfo,\n//     meta: { requiresAuth: false },\n//   },\n// ];\n//\n// const router = createRouter({\n//   history: createWebHistory(process.env.BASE_URL),\n//   routes,\n// });\n//\n// // 导航守卫\n// router.beforeEach((to, from, next) => {\n//   const loggedIn = localStorage.getItem(\"userToken\") ;\n//\n//   const requiresAuth = to.matched.some((record) => record.meta.requiresAuth);\n//\n//   if (requiresAuth && !loggedIn) {\n//     next({ name: \"Login\" });\n//   } else {\n//     next();\n//   }\n// });\n//\n// export default router;","map":{"version":3,"names":["createRouter","createWebHistory","store","RedirectOrder","Login","PackageList","PackageInfo","Welcome","QueryOrderById","PersonalCenter","routes","path","name","component","meta","requiresAuth","router","history","process","env","BASE_URL","beforeEach","to","from","next","loggedIn","localStorage","getItem","commit","username","matched","some","record"],"sources":["/Users/bhc/erss-hwk5-sq44-hb147/ups_frontend/src/router/index.js"],"sourcesContent":["\n// src/router/index.js\n\nimport { createRouter, createWebHistory } from \"vue-router\";\nimport store from \"../store\";\nimport RedirectOrder from \"../components/RedirectOrder.vue\";\nimport Login from \"@/components/LoginComponent.vue\";\nimport PackageList from \"@/components/PackageList.vue\";\nimport PackageInfo from \"@/components/PackageInfo.vue\";\nimport Welcome from \"@/components/Welcome.vue\";\nimport QueryOrderById from \"@/components/QueryOrderById.vue\";\nimport PersonalCenter from \"@/components/PersonalCenter.vue\";\nconst routes = [\n  {\n    path: \"/\",\n    name: \"WelcomePage\",\n    component: Welcome,\n    meta: { requiresAuth: false },\n  },\n  {\n    path: \"/queryOrderById\",\n    name: \"QueryOrderById\",\n    component: QueryOrderById,\n    meta: { requiresAuth: false },\n  },\n  {\n    path: \"/personalCenter\",\n    name: \"PersonalCenter\",\n    component: PersonalCenter,\n    meta: { requiresAuth: false },\n  },\n  {\n    path: \"/redirect\",\n    name: \"RedirectOrder\",\n    component: RedirectOrder,\n    meta: { requiresAuth: false },\n  },\n  {\n    path: \"/login\",\n    name: \"Login\",\n    component: Login,\n    meta: { requiresAuth: false },\n  },\n  {\n    path: \"/package-list\",\n    name: \"PackageList\",\n    component: PackageList,\n    meta: { requiresAuth: false },\n  },\n  {\n    path: \"/package-info\",\n    name: \"PackageInfo\",\n    component: PackageInfo,\n    meta: { requiresAuth: false },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  const loggedIn = localStorage.getItem(\"userToken\");\n\n  // 更新 loggedIn 状态\n  store.commit(\"setLoggedIn\", !!loggedIn);\n\n  // 如果用户已登录，从服务器获取用户名并更新 Vuex 状态\n  if (loggedIn) {\n    const username = \"Fetched from server\";\n    store.commit(\"setUsername\", username);\n  } else {\n    // 如果用户未登录或注销，将 username 重置为空字符串\n    store.commit(\"setUsername\", \"\");\n  }\n\n  const requiresAuth = to.matched.some((record) => record.meta.requiresAuth);\n\n  if (requiresAuth && !loggedIn) {\n    next({ name: \"Login\" });\n  } else {\n    next();\n  }\n});\n\nexport default router;\n\n// import { createRouter, createWebHistory } from \"vue-router\";\n// // import QueryOrder from \"../components/QueryOrderById.vue\";\n// import RedirectOrder from \"../components/RedirectOrder.vue\";\n// import Login from \"@/components/LoginComponent.vue\";\n// import PackageList from \"@/components/PackageList.vue\";\n// import PackageInfo from \"@/components/PackageInfo.vue\";\n// import Welcome from \"@/components/Welcome.vue\";\n// import QueryOrderById from \"@/components/QueryOrderById.vue\";\n//\n// const routes = [\n//   {\n//     path: \"/\",\n//     name: \"WelcomePage\",\n//     component: Welcome,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/queryOrderById\",\n//     name: \"QueryOrderById\",\n//     component: QueryOrderById,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/redirect\",\n//     name: \"RedirectOrder\",\n//     component: RedirectOrder,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/login\",\n//     name: \"Login\",\n//     component: Login,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/package-list\",\n//     name: \"PackageList\",\n//     component: PackageList,\n//     meta: { requiresAuth: false },\n//   },\n//   {\n//     path: \"/package-info\",\n//     name: \"PackageInfo\",\n//     component: PackageInfo,\n//     meta: { requiresAuth: false },\n//   },\n// ];\n//\n// const router = createRouter({\n//   history: createWebHistory(process.env.BASE_URL),\n//   routes,\n// });\n//\n// // 导航守卫\n// router.beforeEach((to, from, next) => {\n//   const loggedIn = localStorage.getItem(\"userToken\") ;\n//\n//   const requiresAuth = to.matched.some((record) => record.meta.requiresAuth);\n//\n//   if (requiresAuth && !loggedIn) {\n//     next({ name: \"Login\" });\n//   } else {\n//     next();\n//   }\n// });\n//\n// export default router;"],"mappings":"AACA;;AAEA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,OAAOC,KAAK,MAAM,UAAU;AAC5B,OAAOC,aAAa,MAAM,iCAAiC;AAC3D,OAAOC,KAAK,MAAM,iCAAiC;AACnD,OAAOC,WAAW,MAAM,8BAA8B;AACtD,OAAOC,WAAW,MAAM,8BAA8B;AACtD,OAAOC,OAAO,MAAM,0BAA0B;AAC9C,OAAOC,cAAc,MAAM,iCAAiC;AAC5D,OAAOC,cAAc,MAAM,iCAAiC;AAC5D,MAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,aAAa;EACnBC,SAAS,EAAEN,OAAO;EAClBO,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAC9B,CAAC,EACD;EACEJ,IAAI,EAAE,iBAAiB;EACvBC,IAAI,EAAE,gBAAgB;EACtBC,SAAS,EAAEL,cAAc;EACzBM,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAC9B,CAAC,EACD;EACEJ,IAAI,EAAE,iBAAiB;EACvBC,IAAI,EAAE,gBAAgB;EACtBC,SAAS,EAAEJ,cAAc;EACzBK,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAC9B,CAAC,EACD;EACEJ,IAAI,EAAE,WAAW;EACjBC,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEV,aAAa;EACxBW,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAC9B,CAAC,EACD;EACEJ,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAET,KAAK;EAChBU,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAC9B,CAAC,EACD;EACEJ,IAAI,EAAE,eAAe;EACrBC,IAAI,EAAE,aAAa;EACnBC,SAAS,EAAER,WAAW;EACtBS,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAC9B,CAAC,EACD;EACEJ,IAAI,EAAE,eAAe;EACrBC,IAAI,EAAE,aAAa;EACnBC,SAAS,EAAEP,WAAW;EACtBQ,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAM;AAC9B,CAAC,CACF;AAED,MAAMC,MAAM,GAAGhB,YAAY,CAAC;EAC1BiB,OAAO,EAAEhB,gBAAgB,CAACiB,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;EAC/CV;AACF,CAAC,CAAC;AAEFM,MAAM,CAACK,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;;EAElD;EACAzB,KAAK,CAAC0B,MAAM,CAAC,aAAa,EAAE,CAAC,CAACH,QAAQ,CAAC;;EAEvC;EACA,IAAIA,QAAQ,EAAE;IACZ,MAAMI,QAAQ,GAAG,qBAAqB;IACtC3B,KAAK,CAAC0B,MAAM,CAAC,aAAa,EAAEC,QAAQ,CAAC;EACvC,CAAC,MAAM;IACL;IACA3B,KAAK,CAAC0B,MAAM,CAAC,aAAa,EAAE,EAAE,CAAC;EACjC;EAEA,MAAMb,YAAY,GAAGO,EAAE,CAACQ,OAAO,CAACC,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAAClB,IAAI,CAACC,YAAY,CAAC;EAE1E,IAAIA,YAAY,IAAI,CAACU,QAAQ,EAAE;IAC7BD,IAAI,CAAC;MAAEZ,IAAI,EAAE;IAAQ,CAAC,CAAC;EACzB,CAAC,MAAM;IACLY,IAAI,EAAE;EACR;AACF,CAAC,CAAC;AAEF,eAAeR,MAAM;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}