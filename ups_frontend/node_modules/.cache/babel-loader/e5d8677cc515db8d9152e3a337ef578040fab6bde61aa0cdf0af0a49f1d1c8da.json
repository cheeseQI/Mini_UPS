{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import { inject } from 'vue';\n// import {\n//   UUserRequest,\n//   URedirect,\n//   UUserResponse,\n// } from \"@/ups_user_pb.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      packageId: \"\",\n      newX: \"\",\n      newY: \"\"\n    };\n  },\n  // setup() {\n  //   const socket = inject('$socket');\n  //   return { socket };\n  // },\n  methods: {\n    async queryOrderByUsername() {\n      console.log(\"query by username\");\n      try {\n        const response = await axios.get(`http://localhost:8080/query/2/${this.username}`);\n        const packageList = response.data.PackageInfoList;\n        this.$router.push({\n          path: \"/package-list\",\n          query: {\n            packageList: JSON.stringify(packageList)\n          }\n        });\n      } catch (error) {\n        console.error(error);\n        alert(\"查询订单失败，请检查用户 ID 或稍后再试。\");\n      }\n    },\n    async redirectOrder() {\n      // const redirect = new URedirect();\n      // redirect.setPackageId(this.packageId);\n      // redirect.setX(this.newX);\n      // redirect.setY(this.newY);\n      //\n      // const request = new UUserRequest();\n      // request.setRedirectCommand(redirect);\n      //\n      // this.$socket.send(\"redirectOrder\", request);\n\n      try {\n        const response = await axios.post(\"http://localhost:8080/redirect\", {\n          packageId: $route.query.packageId,\n          newX: this.newX,\n          newY: this.newY\n        });\n        console.log(response.data);\n        alert(response.data);\n        this.$router.push(\"/\");\n      } catch (error) {\n        console.error(\"Error creating order:\", error);\n      }\n    }\n    // const binaryPayload = await this.$socket.onMessage(\"redirectOrderResponse\");\n    // const response = UUserResponse.deserializeBinary(binaryPayload);\n    // const redirectResult = response.getRedirectResult();\n\n    // if (redirectResult.getMessage() === \"success\") {\n    //   alert(\"redirect success\");\n    //   this.$router.push(\"/\");\n    // } else {\n    //   alert(\"redirect failed\");\n    // }\n  }\n};","map":{"version":3,"names":["axios","data","packageId","newX","newY","methods","queryOrderByUsername","console","log","response","get","username","packageList","PackageInfoList","$router","push","path","query","JSON","stringify","error","alert","redirectOrder","post","$route"],"sources":["/Users/bhc/erss-hwk5-sq44-hb147/ups_frontend/src/components/RedirectOrder.vue"],"sourcesContent":["\n<template>\n  <div>\n    <h1>Redirect Order</h1>\n    <form @submit.prevent=\"redirectOrder\">\n        <label for=\"packageId\">Package ID: {{$route.query.packageId}}</label>      <br />\n        <label for=\"description\">Description: {{$route.query.description}}</label>      <br />\n      <label for=\"newX\">New X:</label>\n      <input v-model=\"newX\" type=\"text\" id=\"newX\" name=\"newX\" />\n      <br />\n      <label for=\"newY\">New Y:</label>\n      <input v-model=\"newY\" type=\"text\" id=\"newY\" name=\"newY\" />\n      <br />\n      <button type=\"submit\">Redirect Order</button>\n    </form>\n  </div>\n</template>\n<script>\n// import { inject } from 'vue';\n// import {\n//   UUserRequest,\n//   URedirect,\n//   UUserResponse,\n// } from \"@/ups_user_pb.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      packageId: \"\",\n      newX: \"\",\n      newY: \"\"\n    };\n  },\n  // setup() {\n  //   const socket = inject('$socket');\n  //   return { socket };\n  // },\n  methods: {\n\n      async queryOrderByUsername() {\n          console.log(\"query by username\");\n\n          try {\n              const response = await axios.get(\n                  `http://localhost:8080/query/2/${this.username}`\n              );\n              const packageList = response.data.PackageInfoList;\n              this.$router.push({\n                  path:\"/package-list\",\n                  query:{\n                      packageList: JSON.stringify(packageList)\n                  }\n              });\n          } catch (error) {\n              console.error(error);\n              alert(\"查询订单失败，请检查用户 ID 或稍后再试。\");\n          }\n      },\n    async redirectOrder() {\n      // const redirect = new URedirect();\n      // redirect.setPackageId(this.packageId);\n      // redirect.setX(this.newX);\n      // redirect.setY(this.newY);\n      //\n      // const request = new UUserRequest();\n      // request.setRedirectCommand(redirect);\n      //\n      // this.$socket.send(\"redirectOrder\", request);\n\n        try {\n            const response = await axios.post(\"http://localhost:8080/redirect\", {\n                packageId: $route.query.packageId,\n                newX: this.newX,\n                newY: this.newY,\n            });\n            console.log(response.data);\n            alert(response.data);\n            this.$router.push(\"/\");\n        } catch (error) {\n            console.error(\"Error creating order:\", error);\n        }\n    }\n      // const binaryPayload = await this.$socket.onMessage(\"redirectOrderResponse\");\n      // const response = UUserResponse.deserializeBinary(binaryPayload);\n      // const redirectResult = response.getRedirectResult();\n\n      // if (redirectResult.getMessage() === \"success\") {\n      //   alert(\"redirect success\");\n      //   this.$router.push(\"/\");\n      // } else {\n      //   alert(\"redirect failed\");\n      // }\n    },\n};\n</script>\n"],"mappings":";AAkBA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE;IACR,CAAC;EACH,CAAC;EACD;EACA;EACA;EACA;EACAC,OAAO,EAAE;IAEL,MAAMC,oBAAoBA,CAAA,EAAG;MACzBC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MAEhC,IAAI;QACA,MAAMC,QAAO,GAAI,MAAMT,KAAK,CAACU,GAAG,CAC3B,iCAAgC,IAAI,CAACC,QAAS,GAClD;QACD,MAAMC,WAAU,GAAIH,QAAQ,CAACR,IAAI,CAACY,eAAe;QACjD,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;UACdC,IAAI,EAAC,eAAe;UACpBC,KAAK,EAAC;YACFL,WAAW,EAAEM,IAAI,CAACC,SAAS,CAACP,WAAW;UAC3C;QACJ,CAAC,CAAC;MACN,EAAE,OAAOQ,KAAK,EAAE;QACZb,OAAO,CAACa,KAAK,CAACA,KAAK,CAAC;QACpBC,KAAK,CAAC,wBAAwB,CAAC;MACnC;IACJ,CAAC;IACH,MAAMC,aAAaA,CAAA,EAAG;MACpB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEE,IAAI;QACA,MAAMb,QAAO,GAAI,MAAMT,KAAK,CAACuB,IAAI,CAAC,gCAAgC,EAAE;UAChErB,SAAS,EAAEsB,MAAM,CAACP,KAAK,CAACf,SAAS;UACjCC,IAAI,EAAE,IAAI,CAACA,IAAI;UACfC,IAAI,EAAE,IAAI,CAACA;QACf,CAAC,CAAC;QACFG,OAAO,CAACC,GAAG,CAACC,QAAQ,CAACR,IAAI,CAAC;QAC1BoB,KAAK,CAACZ,QAAQ,CAACR,IAAI,CAAC;QACpB,IAAI,CAACa,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MAC1B,EAAE,OAAOK,KAAK,EAAE;QACZb,OAAO,CAACa,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MACjD;IACJ;IACE;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;EACF;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}